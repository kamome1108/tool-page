{"version":3,"sources":["../../../../../../../Documents/MyGeminiProject/asset-tools-suite/app/components/ui/Card.tsx","../../../../../../../Documents/MyGeminiProject/asset-tools-suite/app/components/ui/Button.tsx","../../../../../../../Documents/MyGeminiProject/asset-tools-suite/app/%5Blocale%5D/tools/microphone-tester/MicrophoneTesterClient.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface CardProps {\r\n    children: React.ReactNode;\r\n    padding?: 'none' | 'sm' | 'md' | 'lg';\r\n    hover?: boolean;\r\n    className?: string;\r\n    onClick?: () => void;\r\n}\r\n\r\nexport const Card: React.FC<CardProps & React.HTMLAttributes<HTMLDivElement>> = ({\r\n    children,\r\n    padding = 'md',\r\n    hover = false,\r\n    className = '',\r\n    onClick,\r\n    ...props\r\n}) => {\r\n    const paddings = {\r\n        none: '',\r\n        sm: 'p-4',\r\n        md: 'p-6',\r\n        lg: 'p-8',\r\n    };\r\n\r\n    const hoverStyles = hover\r\n        ? 'hover:shadow-xl hover:border-transparent transition-all duration-300 cursor-pointer'\r\n        : '';\r\n\r\n    return (\r\n        <div\r\n            className={`\r\n        bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden\r\n        ${paddings[padding]}\r\n        ${hoverStyles}\r\n        ${className}\r\n      `}\r\n            onClick={onClick}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Link } from '@/i18n/routing';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n    variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger';\r\n    size?: 'sm' | 'md' | 'lg';\r\n    isLoading?: boolean;\r\n    leftIcon?: React.ReactNode;\r\n    rightIcon?: React.ReactNode;\r\n    href?: string;\r\n    locale?: string;\r\n}\r\n\r\nexport const Button: React.FC<ButtonProps> = ({\r\n    children,\r\n    variant = 'primary',\r\n    size = 'md',\r\n    isLoading = false,\r\n    leftIcon,\r\n    rightIcon,\r\n    className = '',\r\n    disabled,\r\n    href,\r\n    locale,\r\n    ...props\r\n}) => {\r\n    const baseStyles = 'inline-flex items-center justify-center font-medium transition-all duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';\r\n\r\n    const variants = {\r\n        primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm hover:shadow-md',\r\n        secondary: 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-blue-500 shadow-sm',\r\n        outline: 'bg-transparent text-blue-600 border border-blue-600 hover:bg-blue-50 focus:ring-blue-500',\r\n        ghost: 'bg-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900 focus:ring-gray-500',\r\n        danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm hover:shadow-md',\r\n    };\r\n\r\n    const sizes = {\r\n        sm: 'px-3 py-1.5 text-xs min-h-8',\r\n        md: 'px-4 py-2 text-sm min-h-10',\r\n        lg: 'px-6 py-3 text-base min-h-12',\r\n    };\r\n\r\n    const classes = `\r\n    ${baseStyles}\r\n    ${variants[variant]}\r\n    ${sizes[size]}\r\n    ${className}\r\n  `;\r\n\r\n    const content = (\r\n        <>\r\n            {isLoading && (\r\n                <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-current\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                </svg>\r\n            )}\r\n            {!isLoading && leftIcon && <span className=\"mr-2\">{leftIcon}</span>}\r\n            {children}\r\n            {!isLoading && rightIcon && <span className=\"ml-2\">{rightIcon}</span>}\r\n        </>\r\n    );\r\n\r\n    if (href) {\r\n        return (\r\n            <Link href={href} locale={locale} className={classes}>\r\n                {content}\r\n            </Link>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <button\r\n            className={classes}\r\n            disabled={disabled || isLoading}\r\n            {...props}\r\n        >\r\n            {content}\r\n        </button>\r\n    );\r\n};\r\n","'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { useTranslations } from 'next-intl';\r\nimport { Button } from '@/app/components/ui/Button';\r\nimport { Card } from '@/app/components/ui/Card';\r\n\r\nexport default function MicrophoneTesterClient() {\r\n    const t = useTranslations('Tools.microphone-tester.ui');\r\n    const [isListening, setIsListening] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [permissionGranted, setPermissionGranted] = useState(false);\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const audioContextRef = useRef<AudioContext | null>(null);\r\n    const analyserRef = useRef<AnalyserNode | null>(null);\r\n    const sourceRef = useRef<MediaStreamAudioSourceNode | null>(null);\r\n    const requestRef = useRef<number | null>(null);\r\n\r\n    const startTest = async () => {\r\n        setError('');\r\n        try {\r\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n            setPermissionGranted(true);\r\n            setIsListening(true);\r\n\r\n            const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n            const analyser = audioContext.createAnalyser();\r\n            const source = audioContext.createMediaStreamSource(stream);\r\n\r\n            source.connect(analyser);\r\n            analyser.fftSize = 256;\r\n\r\n            audioContextRef.current = audioContext;\r\n            analyserRef.current = analyser;\r\n            sourceRef.current = source;\r\n\r\n            drawVisualizer();\r\n        } catch (err) {\r\n            console.error(err);\r\n            setError(t('permissionDenied'));\r\n            setIsListening(false);\r\n        }\r\n    };\r\n\r\n    const stopTest = () => {\r\n        if (sourceRef.current) {\r\n            sourceRef.current.disconnect();\r\n        }\r\n        if (analyserRef.current) {\r\n            analyserRef.current.disconnect();\r\n        }\r\n        if (audioContextRef.current) {\r\n            audioContextRef.current.close();\r\n        }\r\n        if (requestRef.current) {\r\n            cancelAnimationFrame(requestRef.current);\r\n        }\r\n\r\n        setIsListening(false);\r\n        setPermissionGranted(false);\r\n\r\n        // Clear canvas\r\n        const canvas = canvasRef.current;\r\n        if (canvas) {\r\n            const ctx = canvas.getContext('2d');\r\n            if (ctx) {\r\n                ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n            }\r\n        }\r\n    };\r\n\r\n    const drawVisualizer = () => {\r\n        const canvas = canvasRef.current;\r\n        const analyser = analyserRef.current;\r\n\r\n        if (!canvas || !analyser) return;\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) return;\r\n\r\n        const bufferLength = analyser.frequencyBinCount;\r\n        const dataArray = new Uint8Array(bufferLength);\r\n\r\n        const draw = () => {\r\n            requestRef.current = requestAnimationFrame(draw);\r\n            analyser.getByteFrequencyData(dataArray);\r\n\r\n            ctx.fillStyle = 'rgb(249, 250, 251)'; // bg-gray-50\r\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n            const barWidth = (canvas.width / bufferLength) * 2.5;\r\n            let barHeight;\r\n            let x = 0;\r\n\r\n            for (let i = 0; i < bufferLength; i++) {\r\n                barHeight = dataArray[i];\r\n\r\n                // Gradient color based on volume\r\n                const r = barHeight + (25 * (i / bufferLength));\r\n                const g = 250 * (i / bufferLength);\r\n                const b = 50;\r\n\r\n                ctx.fillStyle = `rgb(${r},${g},${b})`;\r\n                ctx.fillRect(x, canvas.height - barHeight / 2, barWidth, barHeight / 2);\r\n\r\n                x += barWidth + 1;\r\n            }\r\n        };\r\n\r\n        draw();\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            stopTest();\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"max-w-3xl mx-auto space-y-6\">\r\n            <Card className=\"p-6\">\r\n                <div className=\"text-center mb-8\">\r\n                    {!isListening ? (\r\n                        <div className=\"space-y-4\">\r\n                            <p className=\"text-gray-600\">{t('instructions')}</p>\r\n                            <Button\r\n                                onClick={startTest}\r\n                                className=\"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg\"\r\n                            >\r\n                                {t('start')}\r\n                            </Button>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"flex items-center justify-center gap-2 text-green-600 font-medium animate-pulse\">\r\n                                <span className=\"relative flex h-3 w-3\">\r\n                                    <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"></span>\r\n                                    <span className=\"relative inline-flex rounded-full h-3 w-3 bg-green-500\"></span>\r\n                                </span>\r\n                                {t('listening')}\r\n                            </div>\r\n                            <Button\r\n                                onClick={stopTest}\r\n                                variant=\"outline\"\r\n                                className=\"border-red-200 text-red-600 hover:bg-red-50\"\r\n                            >\r\n                                {t('stop')}\r\n                            </Button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {error && (\r\n                    <div className=\"bg-red-50 border border-red-200 text-red-600 p-4 rounded-lg text-center mb-6\">\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"bg-gray-50 rounded-lg border border-gray-200 overflow-hidden h-64 relative\">\r\n                    <canvas\r\n                        ref={canvasRef}\r\n                        width={800}\r\n                        height={256}\r\n                        className=\"w-full h-full\"\r\n                    />\r\n                    {!isListening && !error && (\r\n                        <div className=\"absolute inset-0 flex items-center justify-center text-gray-400\">\r\n                            <svg className=\"w-16 h-16 opacity-20\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path d=\"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\" />\r\n                                <path d=\"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z\" />\r\n                            </svg>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </Card>\r\n\r\n            <div className=\"text-center text-sm text-gray-500\">\r\n                {t('processingNote')}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}